# 2. 検索結果の処理

検索結果はユーザーが指定した方法で処理や表示が可能です。

## 2.1 ソート（`query` と同じ階層）

Elasticsearch はデフォルトで関連性スコア（`_score`）に基づいてソートされますが、カスタムのソート方法もサポートしています。ソート可能なフィールドタイプには、`keyword` 型、数値型、地理座標型、日付型などがあります。

### 2.1.1 一般的なフィールドのソート

`keyword` 型、数値型、日付型のソート構文は基本的に同じです。

**構文：**

```json
GET /indexName/_search
{
  "query": {
    "match_all": {}
  },
  "sort": [
    {
      "FIELD": "desc"  // ソート対象のフィールド、ソート順 ASC または DESC
    }
  ]
}
```

### 2.2.2 深いページネーションの問題

990〜1000 件目のデータを取得する場合のクエリは以下のようになります：

```json
GET /hotel/_search
{
  "query": {
    "match_all": {}
  },
  "from": 990, // ページングの開始位置（デフォルトは 0）
  "size": 10, // 取得するドキュメントの総数
  "sort": [
    {"price": "asc"}
  ]
}
```

