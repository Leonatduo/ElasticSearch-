# 2. インデックスライブラリの作成

## 2.1 Mapping マッピング属性

Mapping はインデックスライブラリ内のドキュメントの制約を定義するもので、一般的な mapping 属性には以下が含まれます：

- **type**：フィールドのデータ型、一般的な基本型は以下の通り：
  - 文字列：text（トークン化可能なテキスト）、keyword（厳密な値、例：ブランド、国、IPアドレス）
  - 数値：long、integer、short、byte、double、float
  - ブール値：boolean
  - 日付：date
  - オブジェクト：object
  
- **index**：インデックスを作成するかどうか、デフォルトは true。
- **analyzer**：どの形態素解析器を使用するか。
- **properties**：このフィールドのサブフィールド。

## 2.2 インデックスライブラリの CRUD

ここでは Kibana を使用して DSL を記述する方法を示します。

### 2.2.1 インデックスライブラリとマッピングの作成

基本構文：

- リクエスト方式：PUT
- リクエストパス：/インデックスライブラリ名（任意の名前を設定可能）
- リクエストパラメータ：mapping マッピング

```json
PUT /インデックスライブラリ名
{
  "mappings": {
    "properties": {
      "フィールド名": {
        "type": "text",
        "analyzer": "ik_smart"
      },
      "フィールド名2": {
        "type": "keyword",
        "index": "false"
      },
      "フィールド名3": {
        "properties": {
          "サブフィールド": {
            "type": "keyword"
          }
        }
      }
    }
  }
}
```

### 2.2.2  データベースのクエリ

基本構文：

リクエスト方式：GET
リクエストパス：/インデックスライブラリ名
リクエストパラメータ：なし

```json
GET /heima
```
### 2.2.3 データベースの削除

構文：

リクエスト方式：DELETE
リクエストパス：/インデックスライブラリ名
リクエストパラメータ：なし

フォーマット：

**格式：
```json
DELETE /索引库
```

# 3.ドキュメント操作
## 3.1.ドキュメントの追加
構文：
```json
POST /インデックスライブラリ名/_doc/ドキュメントid
{
    "フィールド1": "値1",
    "フィールド2": "値2",
    "フィールド3": {
        "サブプロパティ1": "値3",
        "サブプロパティ2": "値4"
    },
    // ...
}
```
## 3.2 ドキュメントの修正
構文：
```json
PUT /heima/_doc/1
{
    "info": "黒馬プログラマー上級Java講師",
    "email": "zy@itcast.cn",
    "name": {
        "firstName": "雲",
        "lastName": "趙"
    }
}


```
